一、概述

1.1、租户

每个站点以应用标识(app_id)+站点ID(tenant_id/station_id)作为租户ID(tenant_id)

例如：租户 FT1@6 表示FT1的应用下面的站点6

1.2、角色

系统角色可分为 staff（客服人员）、station_master（站长）、admin（系统管理员）；其中客服与站长必须归属具体租户。

1.3、访客

当前场景特指系统会员，有归属租户。

二、登录认证

访客与客服可通过暴露令牌的方式在客服系统登录，相关对接系统提供用户信息查询接口供客服系统调用，调用完成后即完成登录，同时将用户信息保存到客服系统。

访客连接(登录)成功即自动创建一个自己专属的聊天室，客服登录后可自动连接到一个或多个访客聊天室，同一个聊天室只能有一个客服和访客(具有排他性)。访客退出后聊天室自动销毁。

三、通讯协议

3.1、初步考虑采用 STOMP 协议

3.2、每个聊天室类似于一对一单聊

四、消息分类

4.1、纯文字
略 
4.2、纯图片
规定一次仅能发送一张图片，系统使用http multi-part上传 或者 base64 post

五、选型

vue2+springboot(后端)，并考虑把数据中心整合进来。